<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Gerador Mega-Sena Macabro</title>

    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(#000000, #0a0f24);
            color: #fff;
            text-align: center;
            padding-top: 50px;
        }
        h1 { font-size: 40px; text-shadow: 0 0 20px red; }
        button {
            background: #8e0000;
            border: none;
            padding: 12px 30px;
            font-size: 18px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 20px;
            color: #fff;
        }
        button:disabled {
            opacity: .4;
            cursor: not-allowed;
        }
        #resultado {
            margin-top: 40px;
            font-size: 36px;
            letter-spacing: 8px;
        }
        #login-area {
            display: flex;
            justify-content: center;
            margin-top: 20px;
}
    </style>
</head>
<body>

<h1>⚰️ Gerador Macabro da Mega-Sena ☠️</h1>
<p>Somente para o grupo Sociedade Milionária.</p>

<div id="login-area"></div>

<button id="btnSortear" onclick="sortearPonderado()" disabled>
    Invocar Números
</button>

<div id="resultado"></div>

<script>
    window.onload = () => {
        if (!window.google) {
            console.error("Google Identity não carregou");
            return;
        }

        google.accounts.id.initialize({
            client_id: "1027215876013-6qa237omr6k4v2idtommbokridfupe2g.apps.googleusercontent.com",
            callback: handleCredentialResponse
        });

        google.accounts.id.renderButton(
            document.getElementById("login-area"),
            { theme: "filled_black", size: "large" }
        );
    };

    function handleCredentialResponse(response) {
        const payload = JSON.parse(atob(response.credential.split('.')[1]));

        document.getElementById("login-area").innerHTML = `
            <p>Logado como</p>
            <img src="${payload.picture}" width="60" style="border-radius:50%"><br>
            <strong>${payload.name}</strong><br>
            <small>${payload.email}</small>
        `;

        document.getElementById("btnSortear").disabled = false;
    }

    const frequencia = { 1:255,2:260,3:270,4:300,5:315,6:260,7:280,8:290,9:310,10:345,
        11:275,12:255,13:280,14:260,15:300,16:310,17:295,18:285,19:275,20:260,
        21:305,22:280,23:265,24:275,25:290,26:300,27:310,28:260,29:285,30:270,
        31:250,32:260,33:315,34:320,35:270,36:260,37:290,38:300,39:275,40:290,
        41:260,42:270,43:310,44:300,45:275,46:260,47:285,48:300,49:270,50:260,
        51:275,52:290,53:335,54:310,55:260,56:280,57:290,58:310,59:275,60:300
    };

    function sortearPonderado() {
        const lista = Object.entries(frequencia).map(([n, p]) => ({ numero: +n, peso: p }));
        const sorteio = new Set();

        while (sorteio.size < 10) {
            const total = lista.reduce((a,b)=>a+b.peso,0);
            let r = Math.random() * total;
            for (const i of lista) {
                if ((r -= i.peso) <= 0) {
                    sorteio.add(i.numero);
                    break;
                }
            }
        }

        document.getElementById("resultado").textContent =
            [...sorteio].sort((a,b)=>a-b).join("  ");
    }
</script>

</body>
</html>
